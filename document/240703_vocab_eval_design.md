# 240703 BM25词典评估与归档设计文档

## 1. 主流程与参数说明
- 支持两种模式：
  1) 自动生成+分析：main传入--input-folder，自动调用gen_userdict.py生成词典，再分析
  2) 只分析已有：main传入--dict-dir，直接分析已有bm25_vocab_*.json
- 参数：
  - --input-folder 输入数据目录（可选）
  - --output-dir 词典产出目录（默认dict/）
  - --filter/--no-filter 是否过滤短语
  - --dict-dir 已有词典目录，优先级高于output-dir

## 2. 产物归档规范
- 评估产物统一归档到evaltool/日期/，如evaltool/0703/
- 评估报告、可视化图片、统计数据均带时间戳，命名清晰
- 所有设计文档、方案、说明统一归档到document/下

## 3. 工程健壮性与边界处理自查清单
- 所有输入路径、文件、数据均加存在性/有效性判断，异常友好提示
- 统计、可视化、报告输出前均加空数据兜底分支
- 产物输出前判断目录是否存在，不存在则自动创建
- 评估流程不做任何分词、过滤等"自由发挥"，只分析主流程产物
- 每次提交前，空数据、无效数据、极端数据、正常数据四种case全部跑一遍

## 4. 变更点与用户确认机制
- 评估流程参数、主流程结构、产物归档等如有变更，需提前告知用户并获确认
- 评估流程如需扩展新功能，必须先在主流程实现并复用
- 任何"新逻辑"或"特殊处理"均需用户同意，不允许AI私自创新

## 5. 生成日期
- 本文档生成日期：240703 